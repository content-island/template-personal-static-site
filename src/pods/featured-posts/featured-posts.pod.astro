---
import ShapeRectangle from '#assets/shapes/rectangle.svg';
import { getFeaturedPostsSection } from './api/featured-posts.api';

const content = await getFeaturedPostsSection();
---

<section
  class="bg-primary-50 dark:bg-primary-900 relative overflow-clip rounded-2xl p-6 md:w-1/2 lg:w-full"
  aria-labelledby="popular-posts-aside-heading"
>
  <div class="relative z-10 flex flex-col gap-6">
    <h2 class="font-geist text-tbase-500/80 font-bold" id="popular-posts-aside-heading">{content.title}</h2>

    <ul class="flex flex-col gap-3" aria-label="List of popular posts">
      {
        content.postCollection ? (
          content.postCollection.map((post: any) => (
            <li>
              <a
                href={`/posts/${post.slug}`}
                class="hover:text-primary-600 dark:hover:text-primary-300 text-sm leading-[1.3] decoration-[1.4px] underline-offset-2 transition-all hover:underline"
              >
                {post.title}
              </a>
            </li>
          ))
        ) : (
          <p>Coming Soon</p>
        )
      }
    </ul>
  </div>
  <!-- Decorative shapes -->
  <div class="text-primary-500/25 dark:text-primary-500/35 absolute right-[-75%] bottom-[-25%] h-[243px] w-[420px]">
    <ShapeRectangle />
  </div>
</section>
